!function(){function preview(file){if(file.type.match(/image.*/)){var reader=new FileReader;reader.addEventListener("load",function(event){var template=document.querySelector("#template").innerHTML,parent=form.querySelector(".photos-form__attached");Mustache.parse(template);var html=Mustache.render(template,{source:event.target.result,name:file.name}),div=document.createElement("div");div.classList.add("photos-form__item"),div.innerHTML=html,parent.appendChild(div),div.querySelector(".photos-form__remove-photo").addEventListener("click",function(){removePreview(div)}),que.push({file:file,div:div})}),reader.readAsDataURL(file)}}function removePreview(div){que=que.filter(function(element){return element.div!=div}),div.parentNode.removeChild(div)}if("FormData"in window){var form=document.querySelector(".travel-form"),successModal=document.querySelector(".modal-content--mod"),closeModal=successModal.querySelector(".modal-content__link");if(form.addEventListener("submit",function(event){event.preventDefault();var data=new FormData(form),xhr=new XMLHttpRequest,time=(new Date).getTime();xhr.open("post","https://echo.htmlacademy.ru/adaptive?"+time),que.forEach(function(element){data.append("images",element.file)}),xhr.addEventListener("readystatechange",function(){4==xhr.readyState&&(console.log(xhr.responseText),successModal.classList.add("modal-content--show"))}),xhr.send(data)}),closeModal.addEventListener("click",function(event){event.preventDefault(),successModal.classList.remove("modal-content--show")}),"FileReader"in window){var uploadImgBtn=form.querySelector("#file-upload"),que=[];uploadImgBtn.addEventListener("change",function(){for(var files=this.files,i=0;i<files.length;i++)preview(files[i]);this.value=""})}}}(),function(){function initNumberField(parent){function changeNumber(operation){var value=Number(input.value);isNaN(value)&&(value=0),operation?input.value=value+1:input.value=value-1,input.value>9?input.value=9:input.value<0&&(input.value=0)}var input=parent.querySelector("input"),minus=parent.querySelector(".custom-input__btn--minus"),plus=parent.querySelector(".custom-input__btn--plus");minus.addEventListener("click",function(){changeNumber(!1)}),plus.addEventListener("click",function(){changeNumber(!0)})}for(var elements=document.querySelectorAll(".custom-input--mod"),i=0;i<elements.length;i++)initNumberField(elements[i])}();